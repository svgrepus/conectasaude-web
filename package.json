{
  "name": "conectasaude-backend",
  "version": "1.0.0",
  "description": "Backend completo para Sistema de Secretaria de Saúde Municipal com Supabase",
  "main": "index.js",
  "scripts": {
    "dev": "npm run supabase:start",
    "build": "npm run supabase:build",
    "start": "npm run supabase:serve",
    "test": "npm run supabase:test",
    "lint": "eslint . --ext .js,.ts,.json",
    "format": "prettier --write .",
    "supabase:install": "npm install -g supabase@latest",
    "supabase:login": "supabase login",
    "supabase:init": "supabase init",
    "supabase:start": "supabase start",
    "supabase:stop": "supabase stop",
    "supabase:status": "supabase status",
    "supabase:reset": "supabase db reset",
    "supabase:serve": "supabase serve",
    "supabase:build": "supabase functions build",
    "supabase:test": "supabase test db",
    "db:migrate": "npm run db:migrate:all",
    "db:migrate:all": "npm run db:migrate:001 && npm run db:migrate:002 && npm run db:migrate:003 && npm run db:migrate:004 && npm run db:migrate:005 && npm run db:migrate:006",
    "db:migrate:001": "supabase db push --include-all sql/migrations/001_init.sql",
    "db:migrate:002": "supabase db push --include-all sql/migrations/002_rls.sql",
    "db:migrate:003": "supabase db push --include-all sql/migrations/003_triggers.sql",
    "db:migrate:004": "supabase db push --include-all sql/migrations/004_rpcs.sql",
    "db:migrate:005": "supabase db push --include-all sql/migrations/005_views.sql",
    "db:migrate:006": "supabase db push --include-all sql/migrations/006_seeds.sql",
    "db:seed": "psql $DATABASE_URL -f sql/migrations/006_seeds.sql",
    "db:reset": "supabase db reset && npm run db:migrate && npm run db:seed",
    "db:backup": "pg_dump $DATABASE_URL > backups/backup_$(date +%Y%m%d_%H%M%S).sql",
    "db:restore": "psql $DATABASE_URL < $BACKUP_FILE",
    "functions:deploy": "npm run functions:deploy:all",
    "functions:deploy:all": "npm run functions:deploy:upload && npm run functions:deploy:export",
    "functions:deploy:upload": "supabase functions deploy upload_municipe_foto",
    "functions:deploy:export": "supabase functions deploy relatorios_export",
    "functions:serve": "supabase functions serve",
    "functions:logs": "supabase functions logs",
    "storage:setup": "node scripts/setup-storage.js",
    "setup": "npm run setup:env && npm run setup:supabase && npm run setup:db && npm run setup:functions && npm run setup:storage",
    "setup:env": "cp .env.example .env && echo 'Configure seu arquivo .env antes de continuar'",
    "setup:supabase": "npm run supabase:init && npm run supabase:login",
    "setup:db": "npm run db:migrate",
    "setup:functions": "npm run functions:deploy",
    "setup:storage": "npm run storage:setup",
    "deploy": "npm run deploy:production",
    "deploy:production": "npm run build && npm run functions:deploy && npm run db:migrate",
    "deploy:staging": "npm run build && npm run functions:deploy && npm run db:migrate",
    "health": "curl -f $SUPABASE_URL/rest/v1/medicamentos_active?limit=1 -H \"apikey: $SUPABASE_ANON_KEY\"",
    "logs": "supabase logs",
    "logs:functions": "supabase functions logs",
    "logs:db": "supabase logs db",
    "monitor": "npm run health && npm run logs",
    "docker:build": "docker build -t conectasaude:latest .",
    "docker:run": "docker run -p 3000:3000 conectasaude:latest",
    "docker:dev": "docker-compose up -d",
    "docker:prod": "docker-compose -f docker-compose.yml -f docker-compose.prod.yml up -d",
    "docker:stop": "docker-compose down",
    "docker:logs": "docker-compose logs -f",
    "docker:migrate": "docker-compose run --rm migrations",
    "validate": "npm run validate:sql && npm run validate:functions",
    "validate:sql": "psql $DATABASE_URL -f tests/validation_tests.sql",
    "validate:functions": "npm run functions:test",
    "functions:test": "node tests/test-functions.js",
    "docs:generate": "node scripts/generate-docs.js",
    "docs:serve": "http-server docs -p 8081",
    "security:audit": "npm audit && npm run security:check-env",
    "security:check-env": "node scripts/check-env-security.js",
    "backup:create": "node scripts/create-backup.js",
    "backup:restore": "node scripts/restore-backup.js",
    "maintenance:start": "echo 'Modo manutenção ativado' && touch maintenance.flag",
    "maintenance:stop": "echo 'Modo manutenção desativado' && rm -f maintenance.flag",
    "update:dependencies": "npm update && npm audit fix",
    "clean": "rm -rf node_modules dist logs/*.log",
    "fresh": "npm run clean && npm install && npm run setup"
  },
  "keywords": [
    "supabase",
    "postgresql",
    "healthcare",
    "saude",
    "municipal",
    "secretaria",
    "backend",
    "api",
    "brasil"
  ],
  "author": "ConectaSaúde Team",
  "license": "MIT",
  "repository": {
    "type": "git",
    "url": "https://github.com/seu-usuario/conectasaude.git"
  },
  "bugs": {
    "url": "https://github.com/seu-usuario/conectasaude/issues"
  },
  "homepage": "https://github.com/seu-usuario/conectasaude#readme",
  "engines": {
    "node": ">=18.0.0",
    "npm": ">=8.0.0"
  },
  "dependencies": {
    "@supabase/supabase-js": "^2.38.0",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "express": "^4.18.2",
    "helmet": "^7.0.0",
    "morgan": "^1.10.0",
    "pg": "^8.11.3",
    "uuid": "^9.0.0",
    "joi": "^17.9.2",
    "bcryptjs": "^2.4.3",
    "jsonwebtoken": "^9.0.2",
    "multer": "^1.4.5-lts.1",
    "sharp": "^0.32.5",
    "csv-parser": "^3.0.0",
    "json2csv": "^6.1.0"
  },
  "devDependencies": {
    "@types/node": "^20.5.9",
    "@types/express": "^4.17.17",
    "@types/cors": "^2.8.13",
    "@types/morgan": "^1.9.4",
    "@types/pg": "^8.10.2",
    "@types/uuid": "^9.0.2",
    "@types/bcryptjs": "^2.4.2",
    "@types/jsonwebtoken": "^9.0.2",
    "@types/multer": "^1.4.7",
    "typescript": "^5.2.2",
    "tsx": "^3.12.7",
    "nodemon": "^3.0.1",
    "eslint": "^8.48.0",
    "@typescript-eslint/eslint-plugin": "^6.5.0",
    "@typescript-eslint/parser": "^6.5.0",
    "prettier": "^3.0.3",
    "jest": "^29.6.4",
    "@types/jest": "^29.5.5",
    "supertest": "^6.3.3",
    "@types/supertest": "^2.0.12",
    "http-server": "^14.1.1"
  },
  "optionalDependencies": {
    "supabase": "^1.99.5"
  },
  "config": {
    "port": 3000,
    "logLevel": "info"
  },
  "volta": {
    "node": "18.17.1",
    "npm": "9.8.1"
  }
}
